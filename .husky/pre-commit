#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Secrets detection (gitleaks)
if command -v gitleaks >/dev/null 2>&1; then
  gitleaks protect --staged --config tools/security/.gitleaks.toml
fi

# Run Nx affected lint, typecheck, and test on staged files
pnpm nx affected -t lint typecheck test --base=HEAD~1
